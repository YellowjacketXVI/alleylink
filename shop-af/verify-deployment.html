<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deployment Verification - Shop AF</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .status-box {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .status-item:last-child {
            border-bottom: none;
        }
        .status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.pass {
            background-color: #d4edda;
            color: #155724;
        }
        .status.fail {
            background-color: #f8d7da;
            color: #721c24;
        }
        .status.checking {
            background-color: #fff3cd;
            color: #856404;
        }
        .urgent {
            background-color: #f8d7da;
            border: 2px solid #dc3545;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .success {
            background-color: #d4edda;
            border: 2px solid #28a745;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .code {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            margin: 10px 0;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîç Deployment Verification Tool</h1>
        <p>Check if your Shop AF deployment has the correct asset files</p>
    </div>

    <div class="urgent">
        <h2>üö® Current Issue Detected</h2>
        <p><strong>Your site is looking for old asset files that don't exist:</strong></p>
        <ul>
            <li>‚ùå <code>index-9OUhaljv.css</code> (old file)</li>
            <li>‚ùå <code>index-Bown6zm5.js</code> (old file)</li>
        </ul>
        <p><strong>But your build created:</strong></p>
        <ul>
            <li>‚úÖ <code>index-BC8Kitc8.css</code> (new file)</li>
            <li>‚úÖ <code>index-BFmf3OLS.js</code> (new file)</li>
        </ul>
        <p><strong>Solution:</strong> Upload the new <code>dist/</code> folder contents to replace the old deployment.</p>
    </div>

    <div class="status-box">
        <h2>üìã Deployment Status Check</h2>
        <button onclick="checkDeployment()">üîç Check Current Deployment</button>
        <div id="status-results"></div>
    </div>

    <div class="status-box">
        <h2>üìÅ Files You Need to Upload</h2>
        <p>Upload these files from your <code>dist/</code> folder:</p>
        <div class="code">
dist/
‚îú‚îÄ‚îÄ index.html (CRITICAL - contains correct asset references)
‚îî‚îÄ‚îÄ assets/
    ‚îú‚îÄ‚îÄ index-BC8Kitc8.css
    ‚îî‚îÄ‚îÄ index-BFmf3OLS.js</div>
    </div>

    <div class="status-box">
        <h2>üöÄ Quick Deployment Steps</h2>
        <ol>
            <li><strong>Delete old files</strong> from your web server (optional but recommended)</li>
            <li><strong>Upload entire <code>dist/</code> folder contents</strong> to your web root</li>
            <li><strong>Ensure <code>index.html</code> is at the root level</strong></li>
            <li><strong>Clear browser cache</strong> (Ctrl+F5)</li>
            <li><strong>Test the site</strong> - no more 404 errors!</li>
        </ol>
    </div>

    <div class="status-box">
        <h2>‚úÖ Success Verification</h2>
        <p>After uploading, your site should:</p>
        <ul>
            <li>‚úÖ Load without 404 errors in console</li>
            <li>‚úÖ Show proper styling (CSS loaded)</li>
            <li>‚úÖ React app loads and works</li>
            <li>‚úÖ Admin debugging logs appear when testing</li>
        </ul>
    </div>

    <script>
        async function checkDeployment() {
            const resultsDiv = document.getElementById('status-results');
            resultsDiv.innerHTML = '<p>üîç Checking deployment status...</p>';
            
            const checks = [
                {
                    name: 'Current CSS File',
                    url: '/assets/index-BC8Kitc8.css',
                    expected: true
                },
                {
                    name: 'Current JS File', 
                    url: '/assets/index-BFmf3OLS.js',
                    expected: true
                },
                {
                    name: 'Old CSS File (should not exist)',
                    url: '/assets/index-9OUhaljv.css',
                    expected: false
                },
                {
                    name: 'Old JS File (should not exist)',
                    url: '/assets/index-Bown6zm5.js', 
                    expected: false
                }
            ];
            
            let html = '<h3>üìä Asset File Status</h3>';
            let allGood = true;
            
            for (const check of checks) {
                try {
                    const response = await fetch(check.url, { method: 'HEAD' });
                    const exists = response.ok;
                    const isCorrect = exists === check.expected;
                    
                    if (!isCorrect) allGood = false;
                    
                    html += `
                        <div class="status-item">
                            <span>${check.name}</span>
                            <span class="status ${isCorrect ? 'pass' : 'fail'}">
                                ${exists ? 'EXISTS' : 'NOT FOUND'} ${isCorrect ? '‚úÖ' : '‚ùå'}
                            </span>
                        </div>
                    `;
                } catch (error) {
                    html += `
                        <div class="status-item">
                            <span>${check.name}</span>
                            <span class="status fail">ERROR ‚ùå</span>
                        </div>
                    `;
                    allGood = false;
                }
            }
            
            if (allGood) {
                html += `
                    <div class="success">
                        <h3>üéâ Deployment is Correct!</h3>
                        <p>All asset files are properly deployed. Your site should be working correctly.</p>
                    </div>
                `;
            } else {
                html += `
                    <div class="urgent">
                        <h3>üö® Deployment Needs Fixing</h3>
                        <p>Upload the new dist/ folder contents to fix the asset file issues.</p>
                        <p><strong>See URGENT_DEPLOYMENT_FIX.md for detailed instructions.</strong></p>
                    </div>
                `;
            }
            
            resultsDiv.innerHTML = html;
        }
        
        // Auto-check on page load
        window.addEventListener('load', () => {
            setTimeout(checkDeployment, 1000);
        });
    </script>
</body>
</html>
